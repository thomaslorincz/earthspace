{"filter":false,"title":"index.js","tooltip":"/routes/index.js","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":0,"column":0},"end":{"row":63,"column":24},"action":"insert","lines":["var express = require('express'),","    router  = express.Router(),","    admin   = require('firebase-admin');","    // graph   = require('fbgraph');","","var db = admin.database();","","router.get(\"/\", function(request, response){","    response.render(\"../views/main/index\");","});","","router.get(\"/3d\", function(request, response){","    response.render(\"../views/main/model\");","});","","//Facebook Page Routes","router.post(\"/facebook\", function(request, response){","    // var outerKey = '';","    // var id = '';","    // var email = '';","    // var username = '';","    // var picture = '';","    // var token = '';","    ","    // for(var key in request.body){","    //     outerKey = JSON.parse(key);","    // }","    ","    // id = outerKey['id'];","    // email = outerKey['email'];","    // username = outerKey['username'];","    // token = outerKey['token'];","    ","    // graph.setAccessToken(token);","    ","    // graph.get(\"me\" + \"/?fields=picture\", function(error, resp) {","    //     if(error){","    //         console.log(error);","    //         response.send(Error(error));","    //     } else {","    //         picture = resp.picture.data.url;","    //         if(id === '' || token === ''){","    //             response.send(\"Error! Bad Values!\");","    //         } else {","    //             var dataObj = {","    //                 ['id'] : id,","    //                 ['email'] : email,","    //                 ['username'] : username,","    //                 ['picture'] : picture,","    //                 ['status'] : \"Safe\",","    //                 ['auth_token'] : token","    //             }","    //             db.ref('/users/').update({[id] : dataObj}).then(function(snapshot){","    //             }, function(error){","    //                 if(error){","    //                     response.send(Error(error));","    //                 }","    //             });","    //         }","    //     }","    // });","});","","module.exports = router;"],"id":1}],[{"start":{"row":17,"column":2},"end":{"row":60,"column":10},"action":"remove","lines":["  // var outerKey = '';","    // var id = '';","    // var email = '';","    // var username = '';","    // var picture = '';","    // var token = '';","    ","    // for(var key in request.body){","    //     outerKey = JSON.parse(key);","    // }","    ","    // id = outerKey['id'];","    // email = outerKey['email'];","    // username = outerKey['username'];","    // token = outerKey['token'];","    ","    // graph.setAccessToken(token);","    ","    // graph.get(\"me\" + \"/?fields=picture\", function(error, resp) {","    //     if(error){","    //         console.log(error);","    //         response.send(Error(error));","    //     } else {","    //         picture = resp.picture.data.url;","    //         if(id === '' || token === ''){","    //             response.send(\"Error! Bad Values!\");","    //         } else {","    //             var dataObj = {","    //                 ['id'] : id,","    //                 ['email'] : email,","    //                 ['username'] : username,","    //                 ['picture'] : picture,","    //                 ['status'] : \"Safe\",","    //                 ['auth_token'] : token","    //             }","    //             db.ref('/users/').update({[id] : dataObj}).then(function(snapshot){","    //             }, function(error){","    //                 if(error){","    //                     response.send(Error(error));","    //                 }","    //             });","    //         }","    //     }","    // });"],"id":2}],[{"start":{"row":17,"column":1},"end":{"row":17,"column":2},"action":"remove","lines":[" "],"id":3}],[{"start":{"row":17,"column":0},"end":{"row":17,"column":1},"action":"remove","lines":[" "],"id":4}],[{"start":{"row":16,"column":53},"end":{"row":17,"column":0},"action":"remove","lines":["",""],"id":5}],[{"start":{"row":13,"column":3},"end":{"row":17,"column":3},"action":"remove","lines":["","","//Facebook Page Routes","router.post(\"/facebook\", function(request, response){","});"],"id":6}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":13,"column":3},"end":{"row":13,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1536983431930,"hash":"8dbbcd10ba2d8693ecb30d7ce5f0df24eef34467"}